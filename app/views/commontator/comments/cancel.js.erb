<% if @comment.nil? || @comment.new_record? %>
  <% id = @comment.nil? || @comment.parent.nil? ?
      "commontator-thread-#{@commontator_thread.id}-new-comment" :
      "commontator-comment-#{@comment.parent.id}-reply"
  %>

  document.querySelector("#<%= id %>").style.display = "none";
  document.querySelector("#<%= id %>-link").style.display = "block";
<% else %>
  document.querySelector("#commontator-comment-<%= @comment.id %>-body")
          .innerHTML = "<%= escape_javascript(render partial: 'body', locals: { comment: @comment }) %>";
<% end %>

<%= javascript_proc %>
